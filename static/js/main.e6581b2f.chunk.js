(this["webpackJsonpreact-tech-store"]=this["webpackJsonpreact-tech-store"]||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/mainBcg.016d4fcc.jpeg"},36:function(e,t,a){e.exports=a.p+"static/media/loading.8894b7d3.gif"},37:function(e,t,a){e.exports=a.p+"static/media/logo.7ac3ba3a.svg"},39:function(e,t,a){e.exports=a(74)},44:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=(a(44),a(1)),s=a(13),u=function(){return r.a.createElement("section",{className:"section about-section"},r.a.createElement("h1",{className:"section-title"},"about us"),r.a.createElement("p",null,"Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua. "))},i=a(17),m=a(2),p=a(11),d=function(e,t){switch(t.type){case"REMOVE":return e.filter((function(e){return e.id!==t.payload}));case"INCREASE":return e.map((function(e){return e.id===t.payload?Object(p.a)({},e,{amount:e.amount+1}):Object(p.a)({},e)}));case"DECREASE":return e.map((function(e){return e.id===t.payload?Object(p.a)({},e,{amount:e.amount-1}):Object(p.a)({},e)}));case"ADDTOCART":var a=t.payload,n={id:a.id,image:a.image,title:a.title,price:a.price,amount:1};return[].concat(Object(i.a)(e),[n]);case"CLEARCART":return[];default:return e}},E=r.a.createContext(),b=r.a.createContext(),f=function(){return r.a.createElement("section",{className:"empty-cart section"},r.a.createElement("h2",null,"empty cart..."),r.a.createElement(o.b,{to:"/products",className:"btn btn-primary"},"fill it"))},g=a(14),h=function(e){var t=e.id,a=e.image,n=e.title,c=e.price,l=e.amount,o=r.a.useContext(E),s=o.removeItem,u=o.increaseAmount,i=o.decreaseAmount;return r.a.createElement("article",{className:"cart-item"},r.a.createElement("img",{src:a,alt:n}),r.a.createElement("div",null,r.a.createElement("h4",null,n),r.a.createElement("h5",null,"$",c),r.a.createElement("button",{type:"button",className:"cart-btn remove-btn",onClick:function(){return s(t)}},"remove")),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"cart-btn amount-btn",onClick:function(){u(t)}},r.a.createElement(g.c,null)),r.a.createElement("p",{className:"item-amount"},l),r.a.createElement("button",{type:"button",className:"cart-btn amount-btn",onClick:function(){i(t,l)}},r.a.createElement(g.b,null))))},v=function(){var e=r.a.useContext(E),t=e.cart,a=e.total,n=r.a.useContext(b).user;return 0===t.length?r.a.createElement(f,null):r.a.createElement("section",{className:"cart-items section"},r.a.createElement("h2",null,"your cart "),t.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e))})),r.a.createElement("h2",null,"total: $",a),n.token?r.a.createElement(o.b,{to:"/checkout",className:"btn btn-primary btn-block"},"checkout"):r.a.createElement(o.b,{to:"/login",className:"btn btn-primary btn-block"},"login"))},y=a(4),N=a.n(y),C=a(15),w=a(12),k=a.n(w),x="https://tech-store-api.herokuapp.com",O=function(e){var t,a,n,r,c,l;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,a=e.total,n=e.items,r=e.stripeTokenId,c=e.userToken,o.next=3,N.a.awrap(k.a.post("".concat(x,"/orders"),{name:t,total:a,items:n,stripeTokenId:r},{headers:{Authorization:"Bearer ".concat(c)}}).catch((function(e){return console.log(e)})));case 3:return l=o.sent,o.abrupt("return",l);case 5:case"end":return o.stop()}}))},j=Object(C.injectStripe)((function(e){var t=r.a.useContext(E),a=t.cart,n=t.total,c=t.clearCart,l=r.a.useContext(b),o=l.user,u=l.showAlert,i=l.hideAlert,p=l.alert,d=Object(s.g)(),g=r.a.useState(""),h=Object(m.a)(g,2),v=h[0],y=h[1],w=r.a.useState(""),k=Object(m.a)(w,2),x=k[0],j=k[1],S=!v||p.show;return a.length<1?r.a.createElement(f,null):r.a.createElement("section",{className:"section form"},r.a.createElement("h2",{className:"section-title"},"Checkout"),r.a.createElement("form",{className:"checkout-form"},r.a.createElement("h3",null,"order total: ",r.a.createElement("span",null,"$",n)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("input",{type:"text",id:"name",value:v,onChange:function(e){return y(e.target.value)}})),r.a.createElement("div",{className:"stripe-input"},r.a.createElement("label",{htmlFor:"card-element"},"Credit or Debit Crat"),r.a.createElement("p",{className:"stripe-info"},"Test using this Credit card : ",r.a.createElement("span",null,"4242 4242 4242 4242"),r.a.createElement("br",null),"enter any 5 digits for the zip code",r.a.createElement("br",null),"enter any 3 digits for the CVC")),r.a.createElement(C.CardElement,{className:"card-element"}),x&&r.a.createElement("p",{className:"form-empty"},x),S?r.a.createElement("p",{className:"form-empty"},"please fill out name field"):r.a.createElement("button",{type:"submit",onClick:function(t){var r,l,s;return N.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return u({msg:"submitting order... please wait"}),t.preventDefault(),m.next=4,N.a.awrap(e.stripe.createToken().catch((function(e){return console.log(e)})));case 4:if(r=m.sent,!(l=r.token)){m.next=22;break}return j(""),s=l.id,m.next=11,N.a.awrap(O({name:v,total:n,items:a,stripeTokenId:s,userToken:o.token}));case 11:if(!m.sent){m.next=19;break}return u({msg:"your order is complete"}),c(),d.push("/"),m.abrupt("return");case 19:u({msg:"there was an error with your order.please try again!",type:"danger"});case 20:m.next=24;break;case 22:i(),j(r.error.message);case 24:case"end":return m.stop()}}))},className:"btn btn-primary btn-block"},"submit")))})),S=function(){return r.a.createElement(C.StripeProvider,{apiKey:"pk_test_vPIAodwvZOec2UzX7mFA5opw00CJwTYHTN"},r.a.createElement(C.Elements,null,r.a.createElement(j,null)))};function A(){return r.a.createElement("section",{className:"error-page section"},r.a.createElement("div",{className:"error-container"},r.a.createElement("h1",null,"oops! it's a dead end"),r.a.createElement(o.b,{to:"/",className:"btn btn-primary"},"back Home")))}var I=function(e){var t=e.children;return r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"banner"},r.a.createElement("h1",null,"think. code, deploy"),r.a.createElement("p",null,"embrace your choices - we do"),t))},T=a(35),R=a.n(T),L=function(e){var t=e.image,a=e.title,n=e.id,c=e.price;return r.a.createElement("article",{className:"product"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:t||R.a,alt:a||"default title"}),r.a.createElement(o.b,{to:"products/".concat(n),className:"btn btn-primary"},"details")),r.a.createElement("div",{className:"product-footer"},r.a.createElement("p",{className:"product-title"},a||"default title"),r.a.createElement("p",{className:"product-price"},"$",c||0)))},D=function(e){var t=e.title,a=e.products;return r.a.createElement("section",{className:"section"},r.a.createElement("h2",{className:"section-title"},t),r.a.createElement("div",{className:"products-center"},a.map((function(e){return r.a.createElement(L,Object.assign({key:e.id},e))}))))},F=function(e){return e.map((function(e){var t=e.image&&e.image.url||null;return Object(p.a)({},e,{image:t})}))},J=r.a.createContext(),$=function(e){var t=e.children,a=r.a.useState(!1),n=Object(m.a)(a,2),c=n[0],l=n[1],o=r.a.useState([]),s=Object(m.a)(o,2),u=s[0],i=s[1],p=r.a.useState([]),d=Object(m.a)(p,2),E=d[0],b=d[1];return r.a.useEffect((function(){return l(!0),k.a.get("".concat(x,"/products")).then((function(e){var t=e.data.filter((function(e){return!0===e.featured})),a=F(e.data);i(a),b(F(t)),l(!1)})),function(){}}),[]),r.a.createElement(J.Provider,{value:{products:u,loading:c,featured:E}},t)},P=a(36),G=a.n(P),V=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("h2",null,"loading..."),r.a.createElement("img",{src:G.a,alt:"loading gif"}))},z=function(){var e=r.a.useContext(J),t=e.loading,a=e.featured;return t?r.a.createElement(V,null):r.a.createElement(D,{title:"featured products",products:a})},B=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(I,null,r.a.createElement(o.b,{to:"/products",className:"btn btn-primary btn-hero"},"our products")),r.a.createElement(z,null))},H=function(e){var t,a,n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.password,r.next=3,N.a.awrap(k.a.post("".concat(x,"/auth/local"),{identifier:t,password:a}).catch((function(e){return console.log(e)})));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}))},M=function(e){var t,a,n,r;return N.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.username,a=e.email,n=e.password,c.next=3,N.a.awrap(k.a.post("".concat(x,"/auth/local/register"),{username:t,email:a,password:n}).catch((function(e){return console.log(e)})));case 3:return r=c.sent,c.abrupt("return",r);case 5:case"end":return c.stop()}}))},Y=function(){var e=Object(s.g)(),t=r.a.useContext(b),a=t.userLogin,n=t.showAlert,c=r.a.useState(""),l=Object(m.a)(c,2),o=l[0],u=l[1],i=r.a.useState(""),p=Object(m.a)(i,2),d=p[0],E=p[1],f=r.a.useState("default"),g=Object(m.a)(f,2),h=g[0],v=g[1],y=r.a.useState(!0),C=Object(m.a)(y,2),w=C[0],k=C[1],x=!o||!d||!h||alert.show;return r.a.createElement("section",{className:"form section"},r.a.createElement("h2",{className:"section-title"},w?"sign in":"rigister"),r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",id:"email",value:o,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",id:"password",value:d,onChange:function(e){return E(e.target.value)}})),!w&&r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"username"},"username"),r.a.createElement("input",{type:"text",id:"username",value:h,onChange:function(e){return v(e.target.value)}})),x&&r.a.createElement("p",{className:"form-empty"},"please fill out all form fields"),!x&&r.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary",onClick:function(t){var r,c,l,s;return N.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(n({msg:"accessing user data. please wait..."}),t.preventDefault(),!w){u.next=8;break}return u.next=5,N.a.awrap(H({email:o,password:d}));case 5:r=u.sent,u.next=11;break;case 8:return u.next=10,N.a.awrap(M({email:o,password:d,username:h}));case 10:r=u.sent;case 11:r?(c=r.data,l=c.jwt,s=c.user.username,a({token:l,username:s}),n({msg:"you are logged in : ".concat(s,". shop away my friend")}),e.push("/products")):n({msg:"there was an error. please try again...",type:"danger"});case 12:case"end":return u.stop()}}))}},"submit"),r.a.createElement("p",{className:"register-link"},w?"need to register":"already a member",r.a.createElement("button",{type:"button",onClick:function(){k((function(e){var t=!e;return v(t?"default":""),t}))}},"click here"))))},_=function(){var e=Object(s.h)().id,t=Object(s.g)(),a=r.a.useContext(J).products,n=r.a.useContext(E).addToCart,c=a.find((function(t){return t.id===parseInt(e)}));if(0===a.length)return r.a.createElement(V,null);var l=c.image,o=c.title,u=c.price,i=c.description;return r.a.createElement("section",{className:"single-product-image"},r.a.createElement("img",{src:l,alt:o,className:"single-product-image"}),r.a.createElement("article",null,r.a.createElement("h1",null,"$",o),r.a.createElement("h2",null,"$",u),r.a.createElement("p",null,"$",i),r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){n(c),t.push("/cart")}},"add to cart")))},K=function(){var e=r.a.useContext(J),t=e.loading,a=e.products;return t?r.a.createElement(V,null):r.a.createElement(D,{title:"our products",products:a})},U=a(37),X=a.n(U),Z=function(){var e=r.a.useContext(E).cartItems;return r.a.createElement("div",{className:"cart-link-container"},r.a.createElement(o.b,{to:"/cart"},"cart"),r.a.createElement("span",{className:"cart-link-total"},e))},q=function(){var e=r.a.useContext(b),t=e.user,a=e.userLogout,n=r.a.useContext(E).clearCart;return t.token?r.a.createElement("button",{className:"login-btn",onClick:function(){a(),n()}},"Logout"):r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login"))},Q=function(){var e=r.a.useContext(b).user;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:X.a,alt:"vintage tech logo",className:"logo"}),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"About")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/products"},"Product")),e.token&&r.a.createElement("li",null,r.a.createElement(o.b,{to:"/checkout"},"checkoout"))),r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement(Z,null)))))},W=function(){var e=r.a.useContext(b),t=e.alert,a=e.hideAlert,n="alert-container";return t.show&&(n+=" alert-show","danger"===t.type&&(n+=" alert-danger")),r.a.createElement("div",{className:n},r.a.createElement("div",{className:"alert"},r.a.createElement("p",null,t.show&&t.msg),r.a.createElement("button",{className:"alert-close",onClick:a},r.a.createElement(g.d,null))))},ee=a(38),te=function(e){var t=e.children,a=Object(ee.a)(e,["children"]),n=r.a.useContext(b).user;return r.a.createElement(s.b,Object.assign({},a,{render:function(){return n.token?t:r.a.createElement(s.a,{to:"/login"})}}))},ae=function(){var e=r.a.useContext(b).height;return r.a.createElement("button",{className:e>100?"scroll-btn show-scroll-btn":"scroll-btn",onClick:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},r.a.createElement(g.a,null))};var ne=function(){return r.a.createElement(o.a,{basename:"/react-tech-store"},r.a.createElement(Q,null),r.a.createElement(W,null),r.a.createElement(ae,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(B,null)),r.a.createElement(s.b,{path:"/about"},r.a.createElement(u,null)),r.a.createElement(s.b,{path:"/cart"},r.a.createElement(v,null)),r.a.createElement(te,{path:"/checkout"},r.a.createElement(S,null)),r.a.createElement(s.b,{path:"/login"},r.a.createElement(Y,null)),r.a.createElement(s.b,{exact:!0,path:"/products"},r.a.createElement(K,null)),r.a.createElement(s.b,{path:"/products/:id",children:r.a.createElement(_,null)}),r.a.createElement(s.b,{path:"*"},r.a.createElement(A,null))))};l.a.render(r.a.createElement((function(e){var t=e.children,a=r.a.useState(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{username:null,token:null}),n=Object(m.a)(a,2),c=n[0],l=n[1],o=r.a.useState(0),s=Object(m.a)(o,2),u=s[0],i=s[1];r.a.useEffect((function(){return window.addEventListener("scroll",(function(){i(window.pageYOffset)})),function(){return window.removeEventListener("scroll",(function(){}))}}));var d=r.a.useState({show:!1,msg:"",type:"success"}),E=Object(m.a)(d,2),f=E[0],g=E[1];return r.a.createElement(b.Provider,{value:{user:c,userLogin:function(e){l(e),localStorage.setItem("user",JSON.stringify(e))},userLogout:function(){l({username:null,token:null}),localStorage.removeItem("user")},alert:f,showAlert:function(e){var t=e.msg,a=e.type;g({show:!0,msg:t,type:void 0===a?"success":a})},hideAlert:function(){g(Object(p.a)({},f,{show:!1}))},height:u}},t)}),null,r.a.createElement($,null,r.a.createElement((function(e){var t=e.children,a=r.a.useReducer(d,localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]),n=Object(m.a)(a,2),c=n[0],l=n[1],o=r.a.useState(0),s=Object(m.a)(o,2),u=s[0],p=s[1],b=r.a.useState(0),f=Object(m.a)(b,2),g=f[0],h=f[1];r.a.useEffect((function(){localStorage.setItem("cart",JSON.stringify(c));var e=c.reduce((function(e,t){return e+t.amount}),0);h(e);var t=c.reduce((function(e,t){return e+t.amount*t.price}),0);t=parseFloat(t).toFixed(2),p(t)}),[c]);return r.a.createElement(E.Provider,{value:{cart:c,total:u,cartItems:g,removeItem:function(e){l({type:"REMOVE",payload:e})},increaseAmount:function(e){l({type:"INCREASE",payload:e})},decreaseAmount:function(e,t){l(1!==t?{type:"DECREASE",payload:e}:{type:"REMOVE",payload:e})},addToCart:function(e){var t=Object(i.a)(c).find((function(t){return t.id===e.id}));l(t?{type:"INCREASE",payload:e.id}:{type:"ADDTOCART",payload:e})},clearCart:function(){l({type:"CLEARCART"})}}},t)}),null,r.a.createElement(ne,null)))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e6581b2f.chunk.js.map