(this["webpackJsonpreact-tech-store"]=this["webpackJsonpreact-tech-store"]||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/loading.8894b7d3.gif"},36:function(e,t,a){e.exports=a.p+"static/media/logo.7ac3ba3a.svg"},38:function(e,t,a){e.exports=a(73)},43:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=(a(43),a(1)),s=a(13),u=function(){return r.a.createElement("section",{className:"section about-section"},r.a.createElement("h1",{className:"section-title"},"about us"),r.a.createElement("p",null,"Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua lorem nonumy stet et ipsum sea labore. Lorem sed labore et sanctus sit sanctus, sit eirmod Gubergren stet rebum voluptua. "))},m=a(11),i=a(14),p=a(2),d=r.a.createContext(),E=r.a.createContext(),b=function(){return r.a.createElement("section",{className:"empty-cart section"},r.a.createElement("h2",null,"empty cart..."),r.a.createElement(o.b,{to:"/products",className:"btn btn-primary"},"fill it"))},f=a(15),g=function(e){var t=e.id,a=e.image,n=e.title,c=e.price,l=e.amount,o=r.a.useContext(d),s=o.removeItem,u=o.increaseAmount,m=o.decreaseAmount;return r.a.createElement("article",{className:"cart-item"},r.a.createElement("img",{src:a,alt:n}),r.a.createElement("div",null,r.a.createElement("h4",null,n),r.a.createElement("h5",null,"$",c),r.a.createElement("button",{type:"button",className:"cart-btn remove-btn",onClick:function(){return s(t)}},"remove")),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"cart-btn amount-btn",onClick:function(){u(t)}},r.a.createElement(f.b,null)),r.a.createElement("p",{className:"item-amount"},l),r.a.createElement("button",{type:"button",className:"cart-btn amount-btn",onClick:function(){m(t,l)}},r.a.createElement(f.a,null))))},h=function(){var e=r.a.useContext(d),t=e.cart,a=e.total,n=r.a.useContext(E).user;return 0===t.length?r.a.createElement(b,null):r.a.createElement("section",{className:"cart-items section"},r.a.createElement("h2",null,"your cart "),t.map((function(e){return r.a.createElement(g,Object.assign({key:e.id},e))})),r.a.createElement("h2",null,"total: $",a),n.token?r.a.createElement(o.b,{to:"/checkout",className:"btn btn-primary btn-block"},"checkout"):r.a.createElement(o.b,{to:"/login",className:"btn btn-primary btn-block"},"login"))},v=a(4),N=a.n(v),y=a(16),k=a(12),w=a.n(k),C="https://tech-store-api.herokuapp.com",x=function(e){var t,a,n,r,c,l;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,a=e.total,n=e.items,r=e.stripeTokenId,c=e.userToken,o.next=3,N.a.awrap(w.a.post("".concat(C,"/orders"),{name:t,total:a,items:n,stripeTokenId:r},{headers:{Authorization:"Bearer ".concat(c)}}).catch((function(e){return console.log(e)})));case 3:return l=o.sent,o.abrupt("return",l);case 5:case"end":return o.stop()}}))},O=Object(y.injectStripe)((function(e){var t=r.a.useContext(d),a=t.cart,n=t.total,c=t.clearCart,l=r.a.useContext(E),o=l.user,u=l.showAlert,m=l.hideAlert,i=l.alert,f=Object(s.g)(),g=r.a.useState(""),h=Object(p.a)(g,2),v=h[0],k=h[1],w=r.a.useState(""),C=Object(p.a)(w,2),O=C[0],j=C[1],S=!v||i.show;return a.length<1?r.a.createElement(b,null):r.a.createElement("section",{className:"section form"},r.a.createElement("h2",{className:"section-title"},"Checkout"),r.a.createElement("form",{className:"checkout-form"},r.a.createElement("h3",null,"order total: ",r.a.createElement("span",null,"$",n)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("input",{type:"text",id:"name",value:v,onChange:function(e){return k(e.target.value)}})),r.a.createElement("div",{className:"stripe-input"},r.a.createElement("label",{htmlFor:"card-element"},"Credit or Debit Crat"),r.a.createElement("p",{className:"stripe-info"},"Test using this Credit card : ",r.a.createElement("span",null,"4242 4242 4242 4242"),r.a.createElement("br",null),"enter any 5 digits for the zip code",r.a.createElement("br",null),"enter any 3 digits for the CVC")),r.a.createElement(y.CardElement,{className:"card-element"}),O&&r.a.createElement("p",{className:"form-empty"},O),S?r.a.createElement("p",{className:"form-empty"},"please fill out name field"):r.a.createElement("button",{type:"submit",onClick:function(t){var r,l,s;return N.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return u({msg:"submitting order... please wait"}),t.preventDefault(),i.next=4,N.a.awrap(e.stripe.createToken().catch((function(e){return console.log(e)})));case 4:if(r=i.sent,!(l=r.token)){i.next=22;break}return j(""),s=l.id,i.next=11,N.a.awrap(x({name:v,total:n,items:a,stripeTokenId:s,userToken:o.token}));case 11:if(!i.sent){i.next=19;break}return u({msg:"your order is complete"}),c(),f.push("/"),i.abrupt("return");case 19:u({msg:"there was an error with your order.please try again!",type:"danger"});case 20:i.next=24;break;case 22:m(),j(r.error.message);case 24:case"end":return i.stop()}}))},className:"btn btn-primary btn-block"},"submit")))})),j=function(){return r.a.createElement(y.StripeProvider,{apiKey:"pk_test_vPIAodwvZOec2UzX7mFA5opw00CJwTYHTN"},r.a.createElement(y.Elements,null,r.a.createElement(O,null)))};function S(){return r.a.createElement("section",{className:"error-page section"},r.a.createElement("div",{className:"error-container"},r.a.createElement("h1",null,"oops! it's a dead end"),r.a.createElement(o.b,{to:"/",className:"btn btn-primary"},"back Home")))}var I=function(e){var t=e.children;return r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"banner"},r.a.createElement("h1",null,"think. code, deploy"),r.a.createElement("p",null,"embrace your choices - we do"),t))},A=function(e){var t=e.image,a=e.title,n=e.id,c=e.price;return r.a.createElement("article",{className:"product"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:t,alt:a}),r.a.createElement(o.b,{to:"products/".concat(n),className:"btn btn-primary"},"details")),r.a.createElement("div",{className:"product-footer"},r.a.createElement("p",{className:"product-title"},a),r.a.createElement("p",{className:"product-price"},"$",c)))},T=function(e){var t=e.title,a=e.products;return r.a.createElement("section",{className:"section"},r.a.createElement("h2",{className:"section-title"},t),r.a.createElement("div",{className:"products-center"},a.map((function(e){return r.a.createElement(A,Object.assign({key:e.id},e))}))))},F=function(e){return e.map((function(e){var t=e.image.url;return Object(m.a)({},e,{image:t})}))},L=r.a.createContext(),J=function(e){var t=e.children,a=r.a.useState(!1),n=Object(p.a)(a,2),c=n[0],l=n[1],o=r.a.useState([]),s=Object(p.a)(o,2),u=s[0],m=s[1],i=r.a.useState([]),d=Object(p.a)(i,2),E=d[0],b=d[1];return r.a.useEffect((function(){return l(!0),w.a.get("".concat(C,"/products")).then((function(e){var t=e.data.filter((function(e){return!0===e.featured})),a=F(e.data);m(a),b(F(t)),l(!1)})),function(){}}),[]),r.a.createElement(L.Provider,{value:{products:u,loading:c,featured:E}},t)},$=a(35),P=a.n($),G=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("h2",null,"loading..."),r.a.createElement("img",{src:P.a,alt:"loading gif"}))},z=function(){var e=r.a.useContext(L),t=e.loading,a=e.featured;return t?r.a.createElement(G,null):r.a.createElement(T,{title:"featured products",products:a})},D=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(I,null,r.a.createElement(o.b,{to:"/products",className:"btn btn-primary btn-hero"},"our products")),r.a.createElement(z,null))},H=function(e){var t,a,n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.password,r.next=3,N.a.awrap(w.a.post("".concat(C,"/auth/local"),{identifier:t,password:a}).catch((function(e){return console.log(e)})));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}))},B=function(e){var t,a,n,r;return N.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.username,a=e.email,n=e.password,c.next=3,N.a.awrap(w.a.post("".concat(C,"/auth/local/register"),{username:t,email:a,password:n}).catch((function(e){return console.log(e)})));case 3:return r=c.sent,c.abrupt("return",r);case 5:case"end":return c.stop()}}))},_=function(){var e=Object(s.g)(),t=r.a.useContext(E),a=t.userLogin,n=t.showAlert,c=r.a.useState(""),l=Object(p.a)(c,2),o=l[0],u=l[1],m=r.a.useState(""),i=Object(p.a)(m,2),d=i[0],b=i[1],f=r.a.useState("default"),g=Object(p.a)(f,2),h=g[0],v=g[1],y=r.a.useState(!0),k=Object(p.a)(y,2),w=k[0],C=k[1],x=!o||!d||!h||alert.show;return r.a.createElement("section",{className:"form section"},r.a.createElement("h2",{className:"section-title"},w?"sign in":"rigister"),r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",id:"email",value:o,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",id:"password",value:d,onChange:function(e){return b(e.target.value)}})),!w&&r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"username"},"username"),r.a.createElement("input",{type:"text",id:"username",value:h,onChange:function(e){return v(e.target.value)}})),x&&r.a.createElement("p",{className:"form-empty"},"please fill out all form fields"),!x&&r.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary",onClick:function(t){var r,c,l,s;return N.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(n({msg:"accessing user data. please wait..."}),t.preventDefault(),!w){u.next=8;break}return u.next=5,N.a.awrap(H({email:o,password:d}));case 5:r=u.sent,u.next=11;break;case 8:return u.next=10,N.a.awrap(B({email:o,password:d,username:h}));case 10:r=u.sent;case 11:r?(c=r.data,l=c.jwt,s=c.user.username,a({token:l,username:s}),n({msg:"you are logged in : ".concat(s,". shop away my friend")}),e.push("/products")):n({msg:"there was an error. please try again...",type:"danger"});case 12:case"end":return u.stop()}}))}},"submit"),r.a.createElement("p",{className:"register-link"},w?"need to register":"already a member",r.a.createElement("button",{type:"button",onClick:function(){C((function(e){var t=!e;return v(t?"default":""),t}))}},"click here"))))},K=function(){var e=Object(s.h)().id,t=Object(s.g)(),a=r.a.useContext(L).products,n=r.a.useContext(d).addToCart,c=a.find((function(t){return t.id===parseInt(e)}));if(0===a.length)return r.a.createElement(G,null);var l=c.image,o=c.title,u=c.price,m=c.description;return r.a.createElement("section",{className:"single-product-image"},r.a.createElement("img",{src:l,alt:o,className:"single-product-image"}),r.a.createElement("article",null,r.a.createElement("h1",null,"$",o),r.a.createElement("h2",null,"$",u),r.a.createElement("p",null,"$",m),r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){n(c),t.push("/cart")}},"add to cart")))},U=function(){var e=r.a.useContext(L),t=e.loading,a=e.products;return t?r.a.createElement(G,null):r.a.createElement(T,{title:"our products",products:a})},V=a(36),X=a.n(V),Y=function(){var e=r.a.useContext(d).cartItems;return r.a.createElement("div",{className:"cart-link-container"},r.a.createElement(o.b,{to:"/cart"},"cart"),r.a.createElement("span",{className:"cart-link-total"},e))},Z=function(){var e=r.a.useContext(E),t=e.user,a=e.userLogout,n=r.a.useContext(d).clearCart;return t.token?r.a.createElement("button",{className:"login-btn",onClick:function(){a(),n()}},"Logout"):r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login"))},q=function(){var e=r.a.useContext(E).user;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:X.a,alt:"vintage tech logo",className:"logo"}),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"About")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/products"},"Product")),e.token&&r.a.createElement("li",null,r.a.createElement(o.b,{to:"/checkout"},"checkoout"))),r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(Y,null)))))},M=function(){var e=r.a.useContext(E),t=e.alert,a=e.hideAlert,n="alert-container";return t.show&&(n+=" alert-show","danger"===t.type&&(n+=" alert-danger")),r.a.createElement("div",{className:n},r.a.createElement("div",{className:"alert"},r.a.createElement("p",null,t.show&&t.msg),r.a.createElement("button",{className:"alert-close",onClick:a},r.a.createElement(f.c,null))))},Q=a(37),R=function(e){var t=e.children,a=Object(Q.a)(e,["children"]),n=r.a.useContext(E).user;return r.a.createElement(s.b,Object.assign({},a,{render:function(){return n.token?t:r.a.createElement(s.a,{to:"/login"})}}))};var W=function(){return r.a.createElement(o.a,{basename:"/react-tech-store"},r.a.createElement(q,null),r.a.createElement(M,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(D,null)),r.a.createElement(s.b,{path:"/about"},r.a.createElement(u,null)),r.a.createElement(s.b,{path:"/cart"},r.a.createElement(h,null)),r.a.createElement(R,{path:"/checkout"},r.a.createElement(j,null)),r.a.createElement(s.b,{path:"/login"},r.a.createElement(_,null)),r.a.createElement(s.b,{exact:!0,path:"/products"},r.a.createElement(U,null)),r.a.createElement(s.b,{path:"/products/:id",children:r.a.createElement(K,null)}),r.a.createElement(s.b,{path:"*"},r.a.createElement(S,null))))};l.a.render(r.a.createElement((function(e){var t=e.children,a=r.a.useState(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{username:null,token:null}),n=Object(p.a)(a,2),c=n[0],l=n[1],o=r.a.useState({show:!1,msg:"",type:"success"}),s=Object(p.a)(o,2),u=s[0],i=s[1];return r.a.createElement(E.Provider,{value:{user:c,userLogin:function(e){l(e),localStorage.setItem("user",JSON.stringify(e))},userLogout:function(){l({username:null,token:null}),localStorage.removeItem("user")},alert:u,showAlert:function(e){var t=e.msg,a=e.type;i({show:!0,msg:t,type:void 0===a?"success":a})},hideAlert:function(){i(Object(m.a)({},u,{show:!1}))}}},t)}),null,r.a.createElement(J,null,r.a.createElement((function(e){var t=e.children,a=r.a.useState(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]),n=Object(p.a)(a,2),c=n[0],l=n[1],o=r.a.useState(0),s=Object(p.a)(o,2),u=s[0],E=s[1],b=r.a.useState(0),f=Object(p.a)(b,2),g=f[0],h=f[1];r.a.useEffect((function(){localStorage.setItem("cart",JSON.stringify(c));var e=c.reduce((function(e,t){return e+t.amount}),0);h(e);var t=c.reduce((function(e,t){return e+t.amount*t.price}),0);t=parseFloat(t).toFixed(2),E(t)}),[c]);var v=function(e){var t=Object(i.a)(c).filter((function(t){return t.id!==e}));l(t)},N=function(e){var t=Object(i.a)(c).map((function(t){return t.id===e?Object(m.a)({},t,{amount:t.amount+1}):Object(m.a)({},t)}));l(t)};return r.a.createElement(d.Provider,{value:{cart:c,total:u,cartItems:g,removeItem:v,increaseAmount:N,decreaseAmount:function(e,t){if(1!==t){var a=Object(i.a)(c).map((function(t){return t.id===e?Object(m.a)({},t,{amount:t.amount-1}):Object(m.a)({},t)}));l(a)}else v(e)},addToCart:function(e){var t=e.id,a=e.image,n=e.title,r=e.price;if(Object(i.a)(c).find((function(e){return e.id===t})))N(t);else{var o={id:t,image:a,title:n,price:r,amount:1},s=[].concat(Object(i.a)(c),[o]);l(s)}},clearCart:function(){l([])}}},t)}),null,r.a.createElement(W,null)))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.66e7886a.chunk.js.map